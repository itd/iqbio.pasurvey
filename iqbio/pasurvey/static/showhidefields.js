/*  javascript for show/hide fields based on dropdown selected */

$(document).ready(function() {

    // the ids 'fieldset-0', 'fieldset-1'... is autogenerated by z3c.form
    $.viewMap = {'Biochemistry': $('#fieldset-0, #fieldsetlegend-0'),
                 'ChemBioEngineering': $('#fieldset-1, #fieldsetlegend-1'),
                 'ComputerScience': $('#fieldset-2, #fieldsetlegend-2'),
                 'Ecology': $('#fieldset-3, #fieldsetlegend-3'),
                 'ChemicalPhysics': $('#fieldset-4, #fieldsetlegend-4')};

    function doShow() {
        try {
            $.viewMap[$('#form-widgets-degreeprogram1').val()].show();
        } catch(err) {}
        try {
            $.viewMap[$('#form-widgets-degreeprogram2').val()].show();
        } catch(err) {}
        try {
            $.viewMap[$('#form-widgets-degreeprogram3').val()].show();
        } catch(err) {}
        try {
            // assume that the review fieldset's id is always 5
            // show review fieldset onload if available
            $('#fieldset-5, #fieldsetlegend-5').show();
        } catch(err) {}
    }

    // show onload based on default/stored values (especially in EditForm)
    doShow()

    // onchange event
    $('#form-widgets-degreeprogram1, #form-widgets-degreeprogram2, #form-widgets-degreeprogram3').change(function() {
        // hide all first
        $.each($.viewMap, function() { this.hide(); });
        // show fields that matched values selected in degreeprogram2 and degreeprogram3
        doShow()
    });
});

